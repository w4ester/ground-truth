# Ground Truth Documentation System

[![Version](https://img.shields.io/badge/version-2.0.0-blue.svg)](https://github.com/w4ester/ground-truth)
[![Python](https://img.shields.io/badge/python-3.7%2B-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

A powerful documentation system that automatically generates and maintains `GROUND_TRUTH.md` files for every folder in your project. Designed to prevent context loss when working with AI coding assistants like Claude, ChatGPT, and GitHub Copilot.

## 🎯 Why Ground Truth?

When working with AI coding assistants, context is lost between sessions. The AI doesn't know:
- What files do what
- Which functions are exported
- What dependencies exist
- What TODOs are pending
- Which environment variables are used
- What API endpoints are exposed

Ground Truth solves this by creating a `GROUND_TRUTH.md` in every folder that tracks:
- **Dependencies** - What this folder imports and what imports it
- **Exports** - Functions, classes, and components exported
- **TODOs/FIXMEs** - Pending tasks with line numbers
- **Environment Variables** - All env vars used in the code
- **API Endpoints** - REST endpoints, GraphQL queries, etc.
- **Git History** - Recent changes to the folder
- **File Purpose** - Automatic inference of what each file does

## 🚀 Quick Start

### Installation

```bash
# Clone the repository
git clone https://github.com/w4ester/ground-truth.git
cd ground-truth

# Install dependencies
pip install watchdog
```

### Basic Usage

```bash
# Initialize Ground Truth for your project
python ground_truth.py init

# Watch for changes and auto-update documentation
python ground_truth_watcher.py --init
```

## 📖 How It Works

### 1. Initial Setup
Run the initialization to create `GROUND_TRUTH.md` files throughout your project:

```bash
python ground_truth.py init
```

This will:
- Scan all directories in your project
- Skip directories in `.gitignore`
- Create a `GROUND_TRUTH.md` in each folder
- Analyze Python and JavaScript/TypeScript files for:
  - Import statements and dependencies
  - Exported functions and classes
  - TODO/FIXME comments
  - Environment variable usage
  - API endpoint definitions

### 2. Automatic Updates
Keep documentation synchronized with the watcher:

```bash
# Start the watcher (with initial setup)
python ground_truth_watcher.py --init

# Or just watch without initialization
python ground_truth_watcher.py
```

The watcher will:
- Monitor all file changes in real-time
- Update affected `GROUND_TRUTH.md` files automatically
- Use 2-second debouncing to avoid excessive updates
- Update parent folders when needed

### 3. What Gets Documented

Each `GROUND_TRUTH.md` contains:

```markdown
# GROUND_TRUTH.md for src/components
Last Updated: 2024-01-15T10:30:00
Auto-generated by ground_truth.py

## 📁 Purpose
UI components

## 📄 Files (5 files)
- `Button.tsx` - React TypeScript component (Modified: 2024-01-15, Size: 2.3KB)
- `Card.tsx` - React TypeScript component (Modified: 2024-01-14, Size: 3.1KB)
...

## 📦 Exports
- Button.tsx: class Button
- Card.tsx: class Card
...

## 🔗 Dependencies
### This folder imports:
- ../utils/styles
- react
- react-dom
...

## 📝 TODOs & FIXMEs
- Button.tsx line 45: TODO: Add accessibility props
- Card.tsx line 23: FIXME: Handle edge case for empty content
...

## 🔐 Environment Variables
- REACT_APP_API_URL
- NODE_ENV
...

## 🌐 API Endpoints
- POST /api/components/upload → uploadComponent()
- GET /api/components/{id} → getComponent()
...

## 🔄 Recent Git Changes
- [2024-01-15] feat: Add dark mode support (abc1234)
- [2024-01-14] fix: Card overflow issue (def5678)
...
```

## 🛠️ Advanced Features

### Respects .gitignore
Ground Truth automatically respects your `.gitignore` patterns:
- Won't create documentation in ignored directories
- Skips `node_modules`, `venv`, `.git`, etc.
- Honors custom patterns in your `.gitignore`

### Smart Analysis
The system uses AST (Abstract Syntax Tree) parsing for accurate detection:
- **Python**: Uses `ast` module for precise parsing
- **JavaScript/TypeScript**: Uses regex patterns for compatibility
- **Framework Detection**: Recognizes FastAPI, Express, Flask, React, etc.

### Git Integration
Tracks recent changes for each folder:
- Shows last 10 commits affecting the folder
- Displays commit message, date, and hash
- Helps understand recent modifications

### Custom Sections
You can manually edit the "Critical Information" section:
- Your custom content is preserved during updates
- Add warnings about breaking changes
- Document critical dependencies
- Note special setup requirements

## 🔧 Configuration

### Command Line Options

#### ground_truth.py
```bash
# Initialize all GROUND_TRUTH.md files
python ground_truth.py init

# Update existing files
python ground_truth.py update
```

#### ground_truth_watcher.py
```bash
# Watch current directory
python ground_truth_watcher.py

# Watch specific directory
python ground_truth_watcher.py /path/to/project

# Initialize before watching
python ground_truth_watcher.py --init
```

### Environment Variables
No configuration needed! Ground Truth works out of the box.

## 🤖 AI Assistant Integration

### For Claude, ChatGPT, Cursor, etc.
When starting a new session, tell the AI:

> "This project uses Ground Truth documentation. Check GROUND_TRUTH.md in each folder before making changes."

The AI will then:
1. Read the GROUND_TRUTH.md files
2. Understand the codebase structure
3. Avoid breaking dependencies
4. Follow established patterns

### Example AI Prompt
```
I need to modify the Button component. 
Please read src/components/GROUND_TRUTH.md first to understand dependencies.
```

## 📊 Performance

Ground Truth is designed to be lightweight:
- **CPU**: 0.0% when idle
- **Memory**: ~17MB for the watcher
- **Disk**: ~5KB per GROUND_TRUTH.md file
- **Updates**: 2-second debounce prevents excessive writes

## 🏗️ Project Structure

```
ground-truth/
├── ground_truth.py           # Main documentation generator
├── ground_truth_watcher.py   # File system watcher
├── README.md                 # This file
├── LICENSE                   # MIT License
└── requirements.txt          # Python dependencies
```

## 📋 Requirements

- Python 3.7+
- watchdog (for automatic updates)
- git (optional, for history tracking)

## 🤝 Contributing

Contributions are welcome! Please:
1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Submit a pull request

## 📝 License

MIT License - See [LICENSE](LICENSE) file for details.

## 🐛 Known Issues

- Large repositories (10,000+ files) may take a few minutes for initial setup
- Binary files are automatically skipped
- Some complex TypeScript generics may not be parsed correctly

## 🚦 Roadmap

- [ ] Support for more languages (Go, Rust, Java)
- [ ] VS Code extension
- [ ] Configuration file support
- [ ] Custom documentation templates
- [ ] Integration with CI/CD pipelines
- [ ] Web dashboard for visualization

## 💬 Support

- **Issues**: [GitHub Issues](https://github.com/w4ester/ground-truth/issues)
- **Discussions**: [GitHub Discussions](https://github.com/w4ester/ground-truth/discussions)

## 🙏 Acknowledgments

Created to solve the "context loss" problem when working with AI coding assistants. Inspired by the challenges of maintaining large codebases with multiple AI sessions.

---

**Remember**: Good documentation is the ground truth of your codebase! 📚